{% extends 'base.html' %}
{% block content %}

<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>{% block title %} Manly - North Steyne{% endblock %}</title>

</head>
<body>
    <h1> Northern Beaches Forecast</h1>
    {{ runScraper|safe }}
    <p>
    <h1> North Steyne Cam</h1>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <video id="video" controls="true" width="600" height="400" controls autoplay muted playsinline>

    </video></p>
    <p>
        <link href="//www.surf-forecast.com/stylesheets/widget.css" media="screen" rel="stylesheet" type="text/css" /><div class="wf-width-cont surf-fc-widget"><div class="widget-container"><div class="external-cont"><iframe class="surf-fc-i" allowtransparency="true" src="//www.surf-forecast.com/breaks/Manly-North-Steyne/forecasts/widget/a" scrolling="no" frameborder="0" marginwidth="0" marginheight="0"></iframe><div class="footer"><a class="logo" href="//www.surf-forecast.com/"><img src="//www.surf-forecast.com/images/widget.png" alt="Widget" width="1" height="1" /></a><div class="about" id="cmt">More <a href="//www.surf-forecast.com/breaks/Manly-North-Steyne">Detailed Surf Conditions &amp; Webcams for&nbsp;Manly-North Steyne</a> <nobr>at&nbsp;<a href="//www.surf-forecast.com/">surf-forecast.com</a></nobr>.</div></div></div></div></div>
        </p>
    
    <video id="video-iphone" autoplay width ="100%" height ="100%" loop muted playsinline src="https://cams.cdn-surfline.com/cdn-au/au-manlynorth/playlist.m3u8">
        <source src="https://cams.cdn-surfline.com/cdn-au/au-manlynorth/playlist.m3u8" type="application/x-mpegURL"></source>
     </video>
    <script>
    if(Hls.isSupported())
    {
        var video = document.getElementById('video');
        var hls = new Hls();
        hls.loadSource('https://cams.cdn-surfline.com/cdn-au/au-manlynorth/playlist.m3u8');
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED,function()
        {
            video.play();
        });
    }
    else if (video.canPlayType('application/vnd.apple.mpegurl'))
    {
        video.src = 'https://cams.cdn-surfline.com/cdn-au/au-manlynorth/playlist.m3u8';
        video.addEventListener('canplay',function()
        {
            video.play();
        });
    }
    </script>

<script type="text/javascript">
    function BrowserDetection() {

    //Check if browser is Safari, if it is, hide the <video> tag, otherwise hide the <img> tag
    if (navigator.userAgent.search("Safari") >= 0 && navigator.userAgent.search("Chrome") < 0) {
        document.getElementById('video').style.display= "none";
    } else {
        document.getElementById('video-iphone').style.display= "none";
    }               

    //And run the script. Note that the script tag needs to be run after HTML so where you place it is important. 
    BrowserDetection();
</script>
   
 </body>
</html>

{% endblock %}